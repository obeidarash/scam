{% extends 'shared/base.html' %}
{% load countries %}
{% load static %}
{% load widget_tweaks %}

{% block title %}
    Deposit
{% endblock %}
{% block content %}

    <h2>Your Profile</h2>

    <form action="{% url 'users:profile' %}" method="POST">
        {% csrf_token %}

        <div class="mb-3">
            <label for="{{ profile_form.email.id_for_label }}" class="form-label">Email (username): </label>
            {{ profile_form.email|add_error_class:"is-invalid" }}
            {% for error in profile_form.email.errors %}
                <div id="{{ profile_form.email.id_for_label }}" class="invalid-feedback">
                    {{ error }}
                </div>
            {% endfor %}
            <div id="{{ profile_form.email.id_for_label }}" class="form-text">
                you can change your email in
                <a href="{% url 'users:change_email' %}">here</a>
            </div>
        </div>

        <div class="mb-3">
            <label for="{{ profile_form.fullname.id_for_label }}" class="form-label">Fullname: </label>
            {{ profile_form.fullname|add_error_class:"is-invalid" }}
            {% for error in profile_form.fullname.errors %}
                <div id="{{ profile_form.fullname.id_for_label }}" class="invalid-feedback">
                    {{ error }}
                </div>
            {% endfor %}
        </div>

        <div class="mb-3">
            <label for="{{ profile_form.phone.id_for_label }}" class="form-label">Phone: </label>
            {{ profile_form.phone|add_error_class:"is-invalid" }}
            {% for error in profile_form.phone.errors %}
                <div id="{{ profile_form.phone.id_for_label }}" class="invalid-feedback">
                    {{ error }}
                </div>
            {% endfor %}
            <div id="{{ profile_form.phone.id_for_label }}" class="form-text">We'll never share your email with <a
                    href="#">anyone</a>
                else.
            </div>
        </div>


        <div class="mb-3">
            <label for="country" class="form-label">Country: </label>
            <select name="country" id="country" class="form-control" aria-label="Default select example">

                {% get_countries as countries %}
                {% for country in countries %}
                    {% if request.user.country == country.code %}
                        <option value="{{ country.code }}" selected>{{ country.name }}</option>
                    {% else %}
                        <option value="{{ country.code }}">{{ country.name }}</option>
                    {% endif %}
                {% endfor %}
            </select>
            {% for error in profile_form.fullname.errors %}
                <div id="{{ profile_form.fullname.id_for_label }}" class="invalid-feedback">
                    {{ error }}
                </div>
            {% endfor %}
        </div>

        <div class="mb-3">
            <label for="{{ profile_form.password.id_for_label }}" class="form-label">Password: </label>
            {{ profile_form.password|add_error_class:"is-invalid" }}
            {% for error in profile_form.password.errors %}
                <div id="{{ profile_form.password.id_for_label }}" class="invalid-feedback">
                    {{ error }}
                </div>
            {% endfor %}
            <div id="{{ profile_form.password.id_for_label }}" class="form-text">
                <a href="{% url 'users:change_password' %}">Change</a>
                or
                <a href="{% url 'users:forget_password' %}">Reset</a>
                your password
            </div>
        </div>

        <button class="btn btn-primary" type="submit">Update Profile</button>
    </form>



{% endblock %}